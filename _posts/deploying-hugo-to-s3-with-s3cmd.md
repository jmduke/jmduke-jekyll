---
Title: "Deploying Hugo to S3 with s3cmd"
Date: 2017-02-17 00:00:00
Tags: ["hugo"]
---

<p>This site (as well as my <a href="http://jmduke.com">personal one</a>) is built on <a href="http://gohugo.io">Hugo</a> and hosted on <a href="https://aws.amazon.com/s3/">S3</a>.  I love this combination
for a number of reasons:</p>


<ol>
<li>It’s <em>incredibly</em> fast to build.  (This site, as I’m writing it, builds in <em>26 ms</em>.  Milliseconds.  That’s insane.)</li>
<li>It’s <em>incredibly</em> cheap.  My S3 hosting costs are less than $5 a month.</li>
<li>Deployment is easy.  Each post is a flat <code>.md</code> file, and it takes two CLI commands to build and deploy the site.</li>
</ol>


<p>Let’s talk about that third one a bit, because S3 gets an unfair amount of flak for being a little rough around the edges.</p>


<p>As far as I’m concerned, the S3 tool to end all S3 tools is <a href="http://s3tools.org/s3cmd">s3cmd</a> – it’s free, it’s been
around forever, and it’s incredibly powerful.</p>


<p>Once you download it and set it up, the command to sync a folder (in this case the <code>public/</code> folder generated by Hugo
once you build the site) with an S3 bucket is actually pretty simple:</p>


<pre><code>s3cmd sync ./ s3://villageblacksmith.consulting --acl-public --recursive --skip-existing
</code></pre>


<p>There’s a bunch of stuff going on here:</p>


<ul>
<li>We specify the current folder to sync with <code>./</code>, rather than having it be implicit, to speed up the operation.</li>
<li>We specify the destination bucket with <code>s3://villageblacksmith.consulting</code>.  (<code>villageblacksmith.consulting</code> is my
bucket name, so just replace that with whatever yours is.)</li>
<li>We specify <code>--acl-public</code> so that all of the uploaded files are accessible to the public.</li>
<li>We specify <code>--recursive</code> so that it syncs everything in that folder.</li>
<li>We specify <code>--skip-existing</code> so that we don’t unnecessarily reupload files that haven’t changed (this is one of the
coolest parts of the entire process – it means that when I write a new post I don’t have to reupload the entire
site, just a couple pages!)</li>
</ul>


<p>But that’s it.  You should be able to take this command and use it for your Hugo deployment as well.  Have fun!</p>
	